'use client';

import { motion } from 'framer-motion';

type ExpenseIllustrationProps = {
  className?: string;
  once?: boolean; // animate only once when in view
  delayStep?: number; // gap between the two group animations
  x?: number; // slide distance
  duration?: number; // animation duration
  startDelay?: number;
  inViewAmount?: number | 'some' | 'all';
};

export default function ExpenseIllustration({
  className = '',
  once = true,
  delayStep = 0.25,
  x = 40,
  duration = 0.6,
  startDelay = 0,
  inViewAmount = 0.7,
}: ExpenseIllustrationProps) {
  const slideFade = (delay = 0) => ({
    hidden: { opacity: 0, x },
    show: {
      opacity: 1,
      x: 0,
      transition: { duration, ease: [0.22, 1, 0.36, 1], delay },
    },
  });

  return (
    <motion.svg
      viewBox="0 0 556 300"
      role="img"
      aria-label="Expense illustration"
      preserveAspectRatio="xMidYMid meet"
      className={`h-auto w-full ${className}`}
    >
      <style>{`
        .s0{fill:#fafafa}
        .s1{fill:#ffffff}
        .s2{fill:none;stroke:#f5f5f5}
        .s3{fill:none;stroke:#e5e5e5;stroke-width:.5}
        .s4{fill:#00e599}
        .s5{fill:none;stroke:#0a0a0a;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5}
        .s6{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5}
        .s7{fill:#0a0a0a}
        .s8{fill:#737373}
      `}</style>

      {/* expense-2 (animates second) */}
      <motion.g
        id="expense-2"
        initial="hidden"
        whileInView="show"
        viewport={{ once, amount: inViewAmount }}
        variants={slideFade(startDelay)}
      >
        <path
          fillRule="evenodd"
          className="s0"
          d="M12 0h532c6.63 0 12 5.37 12 12v276c0 6.63-5.37 12-12 12H12c-6.63 0-12-5.37-12-12V12C0 5.37 5.37 0 12 0z"
        />
        <path
          fillRule="evenodd"
          className="s1"
          d="M80 158.5h396c6.35 0 11.5 5.15 11.5 11.5v64c0 6.35-5.15 11.5-11.5 11.5H80c-6.35 0-11.5-5.15-11.5-11.5v-64c0-6.35 5.15-11.5 11.5-11.5z"
        />
        <path
          fillRule="evenodd"
          className="s2"
          d="M80 158.5h396c6.35 0 11.5 5.15 11.5 11.5v64c0 6.35-5.15 11.5-11.5 11.5H80c-6.35 0-11.5-5.15-11.5-11.5v-64c0-6.35 5.15-11.5 11.5-11.5z"
        />
        <path
          fillRule="evenodd"
          className="s1"
          d="M113 176.25c14.22 0 25.75 11.53 25.75 25.75 0 14.22-11.53 25.75-25.75 25.75-14.22 0-25.75-11.53-25.75-25.75 0-14.22 11.53-25.75 25.75-25.75z"
        />
        <path
          fillRule="evenodd"
          className="s3"
          d="M113 176.25c14.22 0 25.75 11.53 25.75 25.75 0 14.22-11.53 25.75-25.75 25.75-14.22 0-25.75-11.53-25.75-25.75 0-14.22 11.53-25.75 25.75-25.75z"
        />
        <path
          fillRule="evenodd"
          className="s4"
          d="M113 184c9.94 0 18 8.06 18 18 0 9.94-8.06 18-18 18-9.94 0-18-8.06-18-18 0-9.94 8.06-18 18-18z"
        />
        <path
          className="s5"
          d="M119.75 205.5v-6q0-.4-.2-.75-.2-.35-.55-.55l-5.25-3q-.35-.2-.75-.2-.4 0-.75.2l-5.25 3q-.35.2-.55.55-.2.35-.2.75v6q0 .4.2.75.2.35.55.55l5.25 3q.35.2.75.2.4 0 .75-.2l5.25-3q.35-.2.55-.55.2-.35.2-.75z"
        />
        <path
          fillRule="evenodd"
          className="s6"
          d="M119.75 202.5l-3.38 1.95v3.89"
        />
        <path
          fillRule="evenodd"
          className="s6"
          d="M109.63 208.34v-3.89l-3.38-1.95"
        />
        <path
          fillRule="evenodd"
          className="s6"
          d="M106.45 198.72l6.55 3.79 6.55-3.79"
        />
        <path fillRule="evenodd" className="s6" d="M113 210.06v-7.56" />
        <path
          fillRule="evenodd"
          className="s6"
          d="M109.63 196.66l3.37 1.95 3.38-1.95"
        />
        <path
          className="s7"
          d="M152.76 195.84v13.16h-2.3v-13.16zm4.79 13.16h-2.2v-8.89h2.04l.17 1.15c.56-.9 1.64-1.42 2.85-1.42 2.23 0 3.38 1.38 3.38 3.69v5.47h-2.19v-4.95c0-1.49-.74-2.21-1.87-2.21-1.36 0-2.18.93-2.18 2.37zm10.75 0l-3.53-8.89h2.34l1.54 4.09c.38 1.06.69 1.98.8 2.46.12-.56.45-1.49.83-2.46l1.62-4.09h2.26l-3.7 8.89zm10.66.24c-2.64 0-4.5-1.93-4.5-4.68 0-2.79 1.82-4.72 4.43-4.72 2.67 0 4.36 1.78 4.36 4.55v.67l-6.7.02q.25 2.35 2.45 2.36c1.21 0 2-.47 2.25-1.32h2.03c-.38 1.95-2 3.12-4.32 3.12zm-.05-7.6c-1.3 0-2.09.7-2.3 2.03h4.46c0-1.22-.85-2.03-2.16-2.03zm5.41 4.66h2.09c.02.78.59 1.26 1.6 1.26 1.03 0 1.58-.41 1.58-1.06 0-.45-.23-.77-1.02-.95l-1.6-.38c-1.6-.36-2.38-1.12-2.38-2.54 0-1.75 1.48-2.79 3.53-2.79 2 0 3.35 1.15 3.37 2.88h-2.09c-.02-.76-.53-1.24-1.37-1.24-.86 0-1.37.39-1.37 1.06q.01.75 1.15 1.01l1.61.38c1.49.34 2.25 1.02 2.25 2.39 0 1.8-1.53 2.92-3.73 2.92-2.21 0-3.62-1.19-3.62-2.94zm12.04 2.7h-2.19v-7.05h-1.71v-1.84h1.71v-2.77h2.19v2.77h1.73v1.84h-1.73zm5.29 0h-2.2v-8.9h2.02l.18 1.05c.45-.74 1.35-1.32 2.63-1.32 1.35 0 2.28.67 2.75 1.7.45-1.03 1.5-1.7 2.85-1.7 2.16 0 3.34 1.3 3.34 3.35v5.82h-2.17v-5.24c0-1.28-.69-1.95-1.73-1.95-1.06 0-1.87.69-1.87 2.15v5.04h-2.2v-5.26c0-1.24-.67-1.91-1.71-1.91-1.04 0-1.89.69-1.89 2.13zm17.71.23c-2.65 0-4.5-1.93-4.5-4.68 0-2.79 1.82-4.72 4.43-4.72 2.66 0 4.35 1.79 4.35 4.56v.66l-6.69.02q.25 2.36 2.44 2.36c1.21 0 2-.47 2.25-1.31h2.04c-.38 1.94-2 3.11-4.32 3.11zm-.06-7.6c-1.29 0-2.08.71-2.3 2.04h4.46c0-1.23-.84-2.04-2.16-2.04zm8.3 7.37h-2.2v-8.9h2.03l.18 1.16c.56-.9 1.64-1.43 2.85-1.43 2.23 0 3.38 1.39 3.38 3.69v5.48h-2.19v-4.95c0-1.5-.74-2.22-1.88-2.22-1.35 0-2.17.94-2.17 2.38zm11.42 0h-2.19v-7.06h-1.71v-1.83h1.71v-2.78h2.19v2.78h1.73v1.83h-1.73z"
        />
        <path
          className="s8"
          d="M385.86 210.75v-1.55c-2.37-.15-3.94-1.5-4.05-3.6h1.8c.04 1.15.89 1.91 2.25 2.05v-4.48l-.64-.15c-2.13-.48-3.23-1.67-3.23-3.52 0-2.06 1.53-3.51 3.87-3.71v-1.57h1.16v1.55c2.17.2 3.56 1.53 3.69 3.62h-1.75c-.07-1.15-.77-1.89-1.94-2.05v4.46l.7.16c2.16.49 3.2 1.62 3.2 3.42 0 2.14-1.53 3.58-3.9 3.8v1.57zm-.29-9.29l.29.07v-4.19c-1.34.18-2.15.95-2.15 2.1 0 1.05.6 1.71 1.86 2.02zm1.78 2.07l-.34-.07v4.15c1.35-.18 2.18-.95 2.18-2.08q.01-1.57-1.84-2zm13.88 5.45l-8.78.02v-1.35l4.19-3.62c2.11-1.82 2.7-2.7 2.7-4.08 0-1.64-.93-2.61-2.5-2.61-1.6 0-2.65 1.17-2.68 3.02h-1.77c.06-2.79 1.82-4.61 4.47-4.61 2.61 0 4.28 1.59 4.28 4.09 0 1.85-.92 3.17-3.22 5.16l-2.7 2.34h6.01zm4.66-.68c0 1.3-.97 2.38-2.25 2.54v-.76c.74-.12 1.26-.61 1.26-1.17q-.17.11-.48.11c-.6 0-1.1-.43-1.1-1.1 0-.72.49-1.24 1.21-1.24.75 0 1.36.63 1.36 1.62zm3.21-8.19l3.04-4.12h2.05l-3.26 4.32q.69-.27 1.37-.27c2.7 0 4.52 1.94 4.52 4.52 0 2.71-2.05 4.66-4.73 4.66-2.7 0-4.79-2.04-4.79-4.66 0-1.55.47-2.63 1.8-4.45zm0 4.46c0 1.79 1.22 3.06 2.99 3.06 1.72 0 2.95-1.27 2.95-3.06 0-1.78-1.23-3.04-2.95-3.04-1.77 0-2.99 1.26-2.99 3.04zm7.61-8.58h9.09v1.62l-4.94 11.39h-1.83l4.98-11.39h-7.3zm9.87 9.39c0-1.56.92-2.82 2.36-3.34-1.22-.53-1.89-1.55-1.89-2.87 0-2.03 1.75-3.42 4.34-3.42 2.56 0 4.28 1.39 4.28 3.44 0 1.33-.68 2.36-1.9 2.85 1.45.46 2.39 1.76 2.39 3.36 0 2.29-1.91 3.82-4.79 3.82-2.9 0-4.79-1.53-4.79-3.84zm2.09-6.1c0 1.28 1.06 2.11 2.68 2.11 1.64 0 2.67-.81 2.67-2.07 0-1.24-1.03-2.04-2.67-2.04-1.62 0-2.68.8-2.68 2zm-.36 5.98c0 1.46 1.21 2.39 3.06 2.39 1.84 0 3.04-.93 3.04-2.39 0-1.44-1.18-2.36-3.06-2.36-1.85 0-3.04.92-3.04 2.36zm10.97 3.96c-.7 0-1.3-.58-1.3-1.26 0-.7.6-1.28 1.3-1.28.68 0 1.28.58 1.28 1.28 0 .68-.6 1.26-1.28 1.26zm2.63-6.72c0-4.03 2.09-6.76 5.37-6.76 3.26 0 5.34 2.73 5.34 6.76 0 4.05-1.99 6.74-5.34 6.74-3.37 0-5.37-2.69-5.37-6.74zm1.75 0c0 3.21 1.33 5.15 3.62 5.15 2.28 0 3.6-1.94 3.6-5.15 0-3.24-1.32-5.18-3.6-5.18-2.29 0-3.62 1.94-3.62 5.18zm10.73 0c0-4.03 2.09-6.76 5.37-6.76 3.26 0 5.34 2.73 5.34 6.76 0 4.05-1.99 6.74-5.34 6.74-3.37 0-5.37-2.69-5.37-6.74zm1.75 0c0 3.21 1.33 5.15 3.62 5.15 2.28 0 3.6-1.94 3.6-5.15 0-3.24-1.32-5.18-3.6-5.18-2.29 0-3.62 1.94-3.62 5.18z"
        />
      </motion.g>

      {/* expense-1 (animates first) */}
      <motion.g
        id="expense-1"
        initial="hidden"
        whileInView="show"
        viewport={{ once, amount: inViewAmount }}
        variants={slideFade(startDelay + delayStep)} // CHANGED
      >
        <path
          fillRule="evenodd"
          className="s1"
          d="M80 54.5h396c6.35 0 11.5 5.15 11.5 11.5v64c0 6.35-5.15 11.5-11.5 11.5H80c-6.35 0-11.5-5.15-11.5-11.5v-64c0-6.35 5.15-11.5 11.5-11.5z"
        />
        <path
          fillRule="evenodd"
          className="s2"
          d="M80 53.5h396c6.35 0 11.5 5.15 11.5 11.5v64c0 6.35-5.15 11.5-11.5 11.5H80c-6.35 0-11.5-5.15-11.5-11.5v-64c0-6.35 5.15-11.5 11.5-11.5z"
        />
        <path
          fillRule="evenodd"
          className="s1"
          d="M113 71.25c14.22 0 25.75 11.53 25.75 25.75 0 14.22-11.53 25.75-25.75 25.75-14.22 0-25.75-11.53-25.75-25.75 0-14.22 11.53-25.75 25.75-25.75z"
        />
        <path
          fillRule="evenodd"
          className="s3"
          d="M113 71.25c14.22 0 25.75 11.53 25.75 25.75 0 14.22-11.53 25.75-25.75 25.75-14.22 0-25.75-11.53-25.75-25.75 0-14.22 11.53-25.75 25.75-25.75z"
        />
        <path
          fillRule="evenodd"
          className="s4"
          d="M113 79c9.94 0 18 8.06 18 18 0 9.94-8.06 18-18 18-9.94 0-18-8.06-18-18 0-9.94 8.06-18 18-18z"
        />
        <path
          className="s5"
          d="M120.5 98.5v4.5c0 .4-.16.78-.44 1.06-.28.28-.66.44-1.06.44h-12c-.4 0-.78-.16-1.06-.44-.28-.28-.44-.66-.44-1.06v-4.5m15 0h-4.5l-1.5 2.25h-3l-1.5-2.25H99m15 0-2.59-5.17q-.19-.38-.55-.6-.36-.23-.79-.23h-7.14q-.43 0-.79.23-.36.22-.55.6L92 98.5"
        />
        <path
          className="s7"
          d="M149.7 94.51c0-2.3 1.91-3.9 4.68-3.9 2.67 0 4.36 1.47 4.43 3.85h-2.3c-.06-1.13-.87-1.8-2.16-1.8-1.43 0-2.34.68-2.34 1.78 0 .94.5 1.46 1.6 1.71l2.07.45c2.25.49 3.35 1.64 3.35 3.6 0 2.45-1.91 4.03-4.81 4.03-2.81 0-4.64-1.49-4.7-3.85h2.31c.01 1.12.91 1.78 2.39 1.78 1.53 0 2.5-.66 2.5-1.76 0-.88-.45-1.4-1.53-1.64l-2.09-.47c-2.23-.48-3.4-1.76-3.4-3.78zm17.12.6h2.19v8.89h-2.03l-.16-1.19c-.54.85-1.7 1.42-2.88 1.42-2.06 0-3.26-1.38-3.26-3.56v-5.56h2.19v4.79c0 1.69.67 2.37 1.89 2.37 1.39 0 2.06-.81 2.06-2.5zm6.49 8.89h-2.03V90.61h2.2v5.8c.57-.99 1.76-1.59 3.11-1.59 2.54 0 4.09 1.98 4.09 4.79 0 2.74-1.68 4.63-4.23 4.63-1.34 0-2.47-.6-2.99-1.62zm.18-4.49c0 1.61.99 2.7 2.5 2.7 1.55 0 2.47-1.11 2.47-2.7 0-1.58-.92-2.71-2.47-2.71-1.51 0-2.5 1.11-2.5 2.71zm8.25 1.79h2.08c.02.77.6 1.26 1.61 1.26 1.02 0 1.58-.42 1.58-1.07 0-.45-.23-.77-1.03-.95l-1.6-.38c-1.6-.36-2.37-1.11-2.37-2.54 0-1.74 1.47-2.79 3.52-2.79 2 0 3.35 1.16 3.37 2.88h-2.09c-.02-.75-.52-1.24-1.37-1.24-.86 0-1.36.4-1.36 1.06q0 .75 1.15 1.01l1.6.38c1.49.34 2.25 1.03 2.25 2.39 0 1.8-1.53 2.92-3.73 2.92-2.21 0-3.61-1.19-3.61-2.93zm8.49-1.77c0-2.75 1.82-4.7 4.45-4.7 2.43 0 4.08 1.35 4.32 3.5h-2.2c-.25-1.01-.99-1.53-2.03-1.53-1.41 0-2.34 1.06-2.34 2.73 0 1.68.86 2.72 2.26 2.72 1.1 0 1.88-.54 2.11-1.51h2.21c-.27 2.07-1.99 3.49-4.32 3.49-2.7 0-4.46-1.87-4.46-4.7zm16-4.46v2.03h-.81c-1.59 0-2.58.85-2.58 2.58v4.32H200v-8.88h2.07l.12 1.3c.38-.88 1.23-1.48 2.42-1.48q.44 0 .97.13zm2.58-1.75c-.75 0-1.35-.59-1.35-1.33 0-.74.6-1.31 1.35-1.31.72 0 1.32.57 1.32 1.31 0 .74-.6 1.33-1.32 1.33zm-1.1 10.68v-8.9h2.2v8.9zm4.47 4.12V93.9h2.03l.14 1.35c.54-1.02 1.71-1.62 3.06-1.62 2.51 0 4.16 1.82 4.16 4.61 0 2.77-1.51 4.79-4.16 4.79-1.33 0-2.48-.52-3.04-1.42v5.31zm2.22-8.57c0 1.6.99 2.7 2.5 2.7 1.55 0 2.46-1.12 2.46-2.7 0-1.58-.91-2.72-2.46-2.72-1.51 0-2.5 1.12-2.5 2.72zm11.86 4.45h-2.19v-7.06h-1.71v-1.84h1.71v-2.77h2.19v2.77h1.73v1.84h-1.73zm4.19-10.67c-.75 0-1.35-.6-1.35-1.34 0-.73.6-1.31 1.35-1.31.72 0 1.32.58 1.32 1.31 0 .74-.6 1.34-1.32 1.34zm-1.09 10.67v-8.89h2.19v8.89zm3.94-4.46c0-2.78 2-4.68 4.76-4.68 2.75 0 4.75 1.9 4.75 4.68 0 2.77-2 4.68-4.75 4.68-2.76 0-4.76-1.91-4.76-4.68zm2.2 0c0 1.62 1.04 2.71 2.56 2.71 1.51 0 2.55-1.09 2.55-2.71 0-1.62-1.04-2.72-2.55-2.72-1.52 0-2.56 1.1-2.56 2.72zm11.24 4.46h-2.19v-8.89h2.03l.18 1.15c.56-.9 1.64-1.42 2.85-1.42 2.23 0 3.38 1.38 3.38 3.69v5.47h-2.2v-4.95c0-1.49-.73-2.21-1.87-2.21-1.35 0-2.18.93-2.18 2.37z"
        />
        <path
          className="s8"
          d="M385.86 105.75v-1.55c-2.37-.15-3.94-1.5-4.05-3.6h1.8c.04 1.15.89 1.91 2.25 2.05v-4.48l-.64-.15c-2.13-.48-3.23-1.67-3.23-3.52 0-2.06 1.53-3.51 3.87-3.71v-1.57h1.16v1.55c2.17.2 3.56 1.53 3.69 3.62h-1.75c-.07-1.15-.77-1.89-1.94-2.05v4.46l.7.16c2.16.49 3.2 1.62 3.2 3.42 0 2.14-1.53 3.58-3.9 3.8v1.57zm-.29-9.29.29.07v-4.19c-1.34.18-2.15.95-2.15 2.1 0 1.05.6 1.71 1.86 2.02zm1.78 2.07-.34-.07v4.15c1.35-.18 2.18-.95 2.18-2.08q.01-1.57-1.84-2zm13.88 5.45-8.78.02v-1.35l4.19-3.62c2.11-1.82 2.7-2.7 2.7-4.08 0-1.64-.93-2.61-2.5-2.61-1.6 0-2.65 1.17-2.68 3.02h-1.77c.06-2.79 1.82-4.61 4.47-4.61 2.61 0 4.28 1.59 4.28 4.09 0 1.85-.92 3.17-3.22 5.16l-2.7 2.34h6.01zm4.66-.68c0 1.3-.97 2.38-2.25 2.54v-.76c.74-.12 1.26-.61 1.26-1.17q-.17.11-.48.11c-.6 0-1.1-.43-1.1-1.1 0-.72.49-1.24 1.21-1.24.75 0 1.36.63 1.36 1.62zm3.21-8.19 3.04-4.12h2.05l-3.26 4.32q.69-.27 1.37-.27c2.7 0 4.52 1.94 4.52 4.52 0 2.71-2.05 4.66-4.73 4.66-2.7 0-4.79-2.04-4.79-4.66 0-1.55.47-2.63 1.8-4.45zm0 4.46c0 1.79 1.22 3.06 2.99 3.06 1.72 0 2.95-1.27 2.95-3.06 0-1.78-1.23-3.04-2.95-3.04-1.77 0-2.99 1.26-2.99 3.04zm7.61-8.58h9.09v1.62l-4.94 11.39h-1.83l4.98-11.39h-7.3zm9.87 9.39c0-1.56.92-2.82 2.36-3.34-1.22-.53-1.89-1.55-1.89-2.87 0-2.03 1.75-3.42 4.34-3.42 2.56 0 4.28 1.39 4.28 3.44 0 1.33-.68 2.36-1.9 2.85 1.45.46 2.39 1.76 2.39 3.36 0 2.29-1.91 3.82-4.79 3.82-2.9 0-4.79-1.53-4.79-3.84zm2.09-6.1c0 1.28 1.06 2.11 2.68 2.11 1.64 0 2.67-.81 2.67-2.07 0-1.24-1.03-2.04-2.67-2.04-1.62 0-2.68.8-2.68 2zm-.36 5.98c0 1.46 1.21 2.39 3.06 2.39 1.84 0 3.04-.93 3.04-2.39 0-1.44-1.18-2.36-3.06-2.36-1.85 0-3.04.92-3.04 2.36zm10.97 3.96c-.7 0-1.3-.58-1.3-1.26 0-.7.6-1.28 1.3-1.28.68 0 1.28.58 1.28 1.28 0 .68-.6 1.26-1.28 1.26zm2.63-6.72c0-4.03 2.09-6.76 5.37-6.76 3.26 0 5.34 2.73 5.34 6.76 0 4.05-1.99 6.74-5.34 6.74-3.37 0-5.37-2.69-5.37-6.74zm1.75 0c0 3.21 1.33 5.15 3.62 5.15 2.28 0 3.6-1.94 3.6-5.15 0-3.24-1.32-5.18-3.6-5.18-2.29 0-3.62 1.94-3.62 5.18zm10.73 0c0-4.03 2.09-6.76 5.37-6.76 3.26 0 5.34 2.73 5.34 6.76 0 4.05-1.99 6.74-5.34 6.74-3.37 0-5.37-2.69-5.37-6.74zm1.75 0c0 3.21 1.33 5.15 3.62 5.15 2.28 0 3.6-1.94 3.6-5.15 0-3.24-1.32-5.18-3.6-5.18-2.29 0-3.62 1.94-3.62 5.18z"
        />
      </motion.g>
    </motion.svg>
  );
}
